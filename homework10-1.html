import datetime


def righttime(d, timeslots):
    # 定义一周中各天的缩写和对应的数字
    day_mapping = {
        'M': 0, 'T': 1, 'W': 2, 'R': 3, 'F': 4, 'S': 5, 'U': 6
    }
    # 获取输入日期时间对象的星期几和时间
    day_of_week = d.weekday()
    current_time = d.time()
    # 分割不同的时隙
    timeslots = timeslots.replace(' ', '').split(',')
    for slot in timeslots:
        # 提取星期几的缩写
        days_str = ''
        for char in slot:
            if char.isalpha():
                days_str += char
            else:
                break
        # 处理星期几的缩写，将其转换为对应的数字列表
        days = []
        for i in range(0, len(days_str), 1):
            if i + 1 < len(days_str) and days_str[i + 1].isalpha():
                days.extend([day_mapping[days_str[i]], day_mapping[days_str[i + 1]]])
                i += 1
            else:
                days.append(day_mapping[days_str[i]])
        # 提取开始时间和结束时间
        time_part = slot[len(days_str):].split('-')
        start_time_str = time_part[0].zfill(5)
        end_time_str = time_part[1].zfill(5)
        start_time = datetime.datetime.strptime(start_time_str, '%H:%M').time()
        end_time = datetime.datetime.strptime(end_time_str, '%H:%M').time()
        # 检查日期和时间是否在时隙内
        if day_of_week in days and start_time <= current_time <= end_time:
            return True
    return False
